<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src={{ url_for("static", filename="js/echarts.min.js") }}></script>
</head>
<body>

<div id="main" style="width: 800px;height:400px;">
    AAAAAAAAAAAAAA
</div>

<script type="text/javascript">

    /*    var myData = new Array(["1996-06-10 21:10:00", 22], ["1997-01-02 21:10:00", 36], ["1997-01-02 21:10:00", 37], ["1997-01-02 21:10:00", 45], ["1997-01-02 21:10:00", 50], ["1997-01-02 21:10:00", 30], ["1997-01-02 21:10:00", 61], ["1997-01-02 21:10:00", 61], ["1997-01-02 21:10:00", 62], ["1997-01-02 21:10:00", 66], ["1997-01-02 21:10:00", 73]);
     //var myData = new Array(["21:10:00", 22], ["21:10:00", 36], ["21:10:00", 37], ["21:10:00", 45], ["21:10:00", 50], ["21:10:00", 30], ["21:10:00", 61], ["21:10:00", 61], ["21:10:00", 62], ["21:10:00", 66], ["21:10:00", 73]);
     var myChart = new JSChart('tps', 'line');
     //alert({{ p_data }})
     //var myData = new Array({{ p_data }})

     //var josn = {"JSChart" : {  "datasets" : [  {  "type" : "line", "data" : [  {  "unit" : "Unit_1",  "value" : "20"  },  {  "unit" : "Unit_2",  "value" : "10"  },  {  "unit" : "Unit_3", "value" : "30" },  {  "unit" : "Unit_4", "value" : "10"},  {  "unit" : "Unit_5",  "value" : "5"  }  ]  }  ]  }  }
     function setAttribute(obj_chart, data_json, title) {
     obj_chart.setTitle(title)
     obj_chart.setAxisNameX('');
     obj_chart.setAxisNameY('');
     obj_chart.setDataJSON(data_json)
     obj_chart.draw()
     }

     myChart.setDataArray(myData);
     myChart.setAxisNameX('');
     myChart.setAxisNameY('');
     myChart.setTitle("TPS")
     myChart.setSize(1000, 400)
     myChart.draw()*/


    // 基于准备好的dom，初始化echarts实例
    var myChart123 = echarts.init(document.getElementById('main'));

    var data_x = [5, 20, 36, 10, 10, 20];
    var data_y = [5, 20, 36, 10, 10, 20];
    // 指定图表的配置项和数据
    var option = {
        title: {
            text: 'QPS'
        },
        tooltip: {},
        //legend: {
        //    data: ['销量']
        //},
        xAxis: {
            data: [5, 20, 36, 10, 10, 20],
            splitLine: {
                show: false
            }
        },
        yAxis: {
            splitLine: {
                show: true
            }
        },
        series: [{
            name: 'QPS',
            type: 'line',
            data: [5, 20, 36, 10, 10, 20]
        }]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart123.setOption(option);


    setInterval(function () {
        if(data_x.length > 50) {
            data_x.shift();
            data_y.shift();
        }
        data_x.push(Math.ceil(Math.random()*100))
        data_y.push(Math.ceil(Math.random()*100))

        myChart123.setOption({
            xAxis: {
                data: data_x
            },
            series: [{
                data: data_y
            }]
        });
    }, 1000);

    /*var myChart = echarts.init(document.getElementById('main'));

    function randomData() {
        now = new Date(+now + oneDay);
        value = value + Math.random() * 21 - 10;
        return {
            name: now.toString(),
            value: [
                [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'),
                Math.round(value)
            ]
        }
    }

    var data = [];
    var now = +new Date(1997, 9, 3);
    var oneDay = 24 * 3600 * 1000;
    var value = Math.random() * 1000;
    for (var i = 0; i < 1000; i++) {
        data.push(randomData());
    }

    option = {
        title: {
            text: '动态数据 + 时间坐标轴'
        },
        tooltip: {
            trigger: 'axis',
            formatter: function (params) {
                params = params[0];
                var date = new Date(params.name);
                return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value[1];
            },
            axisPointer: {
                animation: false
            }
        },
        xAxis: {
            type: 'time',
            splitLine: {
                show: false
            }
        },
        yAxis: {
            type: 'value',
            boundaryGap: [0, '100%'],
            splitLine: {
                show: false
            }
        },
        series: [{
            name: '模拟数据',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: [5, 20, 36, 10, 10, 20]
        }]
    };

    setInterval(function () {

        for (var i = 0; i < 5; i++) {
            data.shift();
            data.push(randomData());
        }

        myChart.setOption({
            series: [{
                data: data
            }]
        });
    }, 1000);*/
</script>
</body>
</html>